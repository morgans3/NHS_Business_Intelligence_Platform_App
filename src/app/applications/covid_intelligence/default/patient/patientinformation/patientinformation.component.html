<mat-card>
  <mat-card-content>
    <mat-card-title>Patient Record Changes</mat-card-title>
    <hr />
    <p *ngIf="!changes">Loading...</p>

    <p *ngIf="changes && changes.length === 0">
      No changes to record history
    </p>

    <table style="width: 100%;" *ngIf="changes && changes.length > 0">
      <thead>
        <th>
          Date
        </th>
        <th>
          Type
        </th>
        <th>
          Actions
        </th>
      </thead>
      <tr *ngFor="let change of changes">
        <td><span *ngIf="change.date">{{ change.date | date: 'dd/MM/yyyy' }}</span></td>
        <td>{{change.type}}</td>
        <td>
          <button *ngIf="change.form" (click)="formSelected(change.form)" mat-icon-button color="primary"
            title="Display Form">
            <mat-icon>visibility</mat-icon>
          </button>
        </td>
      </tr>
    </table>

  </mat-card-content>
</mat-card>

<mat-card>
  <mat-card-content>
    <mat-card-title>Record Notes</mat-card-title>
    <hr />
    <div fxLayout="row wrap">
      <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100">
        <form class="m-t-20" [formGroup]="myForm" (ngSubmit)="onSubmit()">
          <mat-form-field class="example-full-width">
            <input autocomplete="off" matInput placeholder="Note Type" type="text" formControlName="type">
          </mat-form-field>

          <mat-form-field class="example-full-width">
            <textarea autocomplete="off" matInput placeholder="Note" type="text" formControlName="note"
              cdkTextareaAutosize cdkAutosizeMinRows="6"></textarea>
          </mat-form-field>

          <mat-card-actions>
            <button mat-raised-button color="primary" type="submit" *ngIf="!newEditFormID"
              [disabled]="!myForm.valid">Submit</button>
            <button mat-raised-button color="primary" type="submit" *ngIf="newEditFormID"
              [disabled]="!myForm.valid">Update</button>
            <button mat-raised-button color="warn" (click)="exitEditMode()" *ngIf="newEditFormID">Exit
              edit mode</button>
            <button mat-raised-button *ngIf="!newEditFormID" color="warn" type="button"
              (click)="clearForm()">Clear</button>
          </mat-card-actions>
        </form>
      </div>
    </div>
  </mat-card-content>
</mat-card>
